create table state (
  st_id bigint generated by default as identity(start with 100, increment by 1) primary key,
  st_code varchar(50) unique not null,
  st_title varchar(255) not null
);

create table location (
  lc_id bigint generated by default as identity(start with 100, increment by 1) primary key,
  lc_x bigint not null,
  lc_y bigint not null
);

create table snapshot (
  sn_id bigint generated by default as identity(start with 100, increment by 1) primary key,
  sn_last_turn_id bigint,
  sn_dump varchar(9),
  foreign key (sn_last_turn_id) references location (lc_id)
);

create table game (
  gm_id bigint generated by default as identity(start with 100, increment by 1) primary key,
  gm_state_id bigint not null,
  gm_title varchar(255) not null,
  gm_name varchar(255),
  gm_character char(1),
  gm_snapshot_id bigint not null,
  foreign key (gm_state_id) references state (st_id),
  foreign key (gm_snapshot_id) references snapshot (sn_id)
);

create table game_to_location (
  gl_game_id bigint not null,
  gl_location_id bigint not null,
  unique (gl_game_id, gl_location_id),
  foreign key (gl_game_id) references game (gm_id),
  foreign key (gl_location_id) references location (lc_id)
);
